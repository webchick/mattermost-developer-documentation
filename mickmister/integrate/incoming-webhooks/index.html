<!DOCTYPE html>





<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> Incoming Webhooks</title>
<meta name="viewport" content="width=device-width, initial-scale=1">   
<meta http-equiv="content-language" content="en-us" />



<link rel="canonical" href="../../integrate/incoming-webhooks/">


<link rel="shortcut icon" type="image/png" href="../../img/favicon-32x32.png" />

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">


<link rel="stylesheet" href="../../css/bootstrap.min.css">
<link rel="stylesheet" href="../../css/tabs.css">
<link rel="stylesheet" href="../../css/bar.css">
<link rel="stylesheet" href="../../css/styles.css">
<link rel="stylesheet" href="../../css/code.css">
<link rel="stylesheet" href="../../css/note.css">


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../../js/tabs.js"></script>
<script src="../../js/main.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script async src="//cdn.bizible.com/scripts/bizible.js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-64458817-2"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-64458817-2');
</script>


<script type="text/javascript">
    (function() {
    var didInit = false;
    function initMunchkin() {
    if(didInit === false) {
    didInit = true;
    Munchkin.init('161-FBE-733');
    }
    }
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
    initMunchkin();
    }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>


<script type="text/javascript" charset="utf-8">
    var _eiq = _eiq || [];
    var _engagio_settings = {
      accountId: "cb6a404b72e9141b70d1f82abc04db92b4e56238"
    };
    (function() {
      var ei = document.createElement('script'); ei.type = 'text/javascript'; ei.async = true;
      ei.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'web-analytics.engagio.com/js/ei.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ei, s);
    })();
  </script>

    </head>
<body>
    <header>
    <a href="../../"><img src="../../img/logo.svg" alt="Mattermost Logo" width="212px"></a>
    <div class="header__menu-toggle">
        <i class="fa fa-bars"></i>
    </div>
    <ul class="header__links--right">
        <li><a href="../../">Home</a></li>
        
            
            
            
                
                    <li><a href="../../contribute/getting-started">Contribute</a></li>
                
            
        
            
            
            
                
                    <li class="active"><a href="../../integrate/getting-started">Integrate</a></li>
                
            
        
            
            
            
                
                    <li><a href="../../extend/getting-started">Extend</a></li>
                
            
        
            
            
            
                
                    <li><a href="../../blog">Blog</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://docs.mattermost.com/">Admin Docs</a></li>
                
            
        
    </ul>
</header>




    <div id="wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 sidebar">
    <div class="sidebar__menu-toggle">
        Incoming Webhooks
        <i class="fa fa-bars pull-right"></i>
    </div>
    <div class="row sidebar__links">
        
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../integrate/getting-started/"> Getting Started</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../integrate/getting-started/how-should-i-integrate/"> How Should I Integrate?</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                
                    
                

                
                    
                

                <span class="item active">
                    <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a class="active" href="#"> Incoming Webhooks</a>
                    
                </span>
                <ul class="sub-menu" style="display: block">
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../integrate/outgoing-webhooks/"> Outgoing Webhooks</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../integrate/slash-commands/"> Slash Commands</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../integrate/rest-api/"> API Reference</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../integrate/examples/"> Examples</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
        
    </div>
</div>

                <div class="col-lg-9 doc-content">
                    
<a href="https://github.com/mattermost/mattermost-developer-documentation/edit/master/site/content/integrate/incoming-webhooks/_index.md" class="float-right edit-github">
    Edit on GitHub
</a>


                    <h1 class="mt-0 doc-title">
                        Incoming Webhooks
                    </h1>
                    <p>Incoming webhooks let you POST some data to a Mattermost endpoint to create a message in a channel.</p>
<h3 id="basic-usage">Basic Usage&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#basic-usage"></i></a> </h3>
<p>Follow <a href="https://docs.mattermost.com/developer/webhooks-incoming.html#simple-incoming-webhook">the admin guide</a> to create the webhook endpoint. It&rsquo;ll look something like this:</p>
<pre><code>https://your-mattermost-server.com/hooks/xxx-generatedkey-xxx
</code></pre><p><strong>Treat this endpoint as a secret.</strong> Anyone who has it will be able to post messages to your Mattermost instance.</p>
<p>To use the endpoint, have your application make the following request:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#c0f">POST</span> <span style="color:#0cf;font-weight:bold">/hooks/xxx-generatedkey-xxx</span> <span style="color:#069;font-weight:bold">HTTP</span><span style="color:#555">/</span><span style="color:#f60">1.1</span>
Host<span style="color:#555">:</span> your-mattermost-server
Content-Type<span style="color:#555">:</span> application/json
Content-Length<span style="color:#555">:</span> 63

{<span style="color:#309;font-weight:bold">&#34;text&#34;</span>: <span style="color:#c30">&#34;Hello, this is some text\nThis is more text. :tada:&#34;</span>}
</code></pre></div><p>As a curl:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -i -X POST -H <span style="color:#c30">&#39;Content-Type: application/json&#39;</span> -d <span style="color:#c30">&#39;{&#34;text&#34;: &#34;Hello, this is some text\nThis is more text. :tada:&#34;}&#39;</span> http://<span style="color:#555">{</span>your-mattermost-site<span style="color:#555">}</span>/hooks/xxx-generatedkey-xxx
</code></pre></div><p>For compatibility with Slack incoming webhooks, if no <code>Content-Type</code> header is set then the request body must be prefixed with <code>payload=</code>, like so:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#033">payload</span><span style="color:#555">={</span><span style="color:#c30">&#34;text&#34;</span>: <span style="color:#c30">&#34;Hello, this is some text\nThis is more text. :tada:&#34;</span><span style="color:#555">}</span>
</code></pre></div><p>A successful request will get the following response:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#069;font-weight:bold">HTTP</span><span style="color:#555">/</span><span style="color:#f60">1.1</span> <span style="color:#f60">200</span> <span style="color:#c00;font-weight:bold">OK</span>
Content-Type<span style="color:#555">:</span> text/plain
X-Request-Id<span style="color:#555">:</span> hoan6o9ws7rp5xj7wu9rmysrte
X-Version-Id<span style="color:#555">:</span> 4.7.1.dev.12799cd77e172e8a2eba0f9091ec1471.false
Date<span style="color:#555">:</span> Sun, 04 Mar 2018 17:19:09 GMT
Content-Length<span style="color:#555">:</span> 2

<span style="color:#a00;background-color:#faa">ok</span>
</code></pre></div><p>All webhook posts will display a <code>BOT</code> indicator next to the username in Mattermost clients, to help prevent against <a href="https://en.wikipedia.org/wiki/Phishing">phishing attacks</a>.</p>
<h3 id="parameters">Parameters&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#parameters"></i></a> </h3>
<p>Incoming webhooks support more than just the <code>text</code> field. Here is a full list of supported parameters.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>text</td>
<td><a href="https://docs.mattermost.com/help/messaging/formatting-text.html">Markdown-formatted</a> message to display in the post.<br> To trigger notifications, use <code>@&lt;username&gt;</code>, <code>@channel</code> and <code>@here</code> like you would in normal Mattermost messaging.</td>
<td>If <code>attachments</code> is not set, yes</td>
</tr>
<tr>
<td>channel</td>
<td>Overrides the channel the message posts in. Use the channel&rsquo;s name and not the display name, e.g. use <code>town-square</code>, not <code>Town Square</code>.<br> Use an &ldquo;@&rdquo; followed by a username to send to a direct message.<br> Defaults to the channel set during webhook creation.<br> The webhook can post to any public channel and private channel the webhook creator is in.<br> Posts to direct messages will appear in the DM between the targeted user and the webhook creator.</td>
<td>No</td>
</tr>
<tr>
<td>username</td>
<td>Overrides the username the message posts as.<br> Defaults to the username set during webhook creation or the webhook creator&rsquo;s username if the former was not set.<br> Must be enabled <a href="https://docs.mattermost.com/administration/config-settings.html#enable-integrations-to-override-usernames">in the configuration</a>.</td>
<td>No</td>
</tr>
<tr>
<td>icon_url</td>
<td>Overrides the profile picture the message posts with.<br> Defaults to the URL set during webhook creation or the webhook creator&rsquo;s profile picture if the former was not set.<br> Must be enabled <a href="https://docs.mattermost.com/administration/config-settings.html#enable-integrations-to-override-profile-picture-icons">in the configuration</a>.</td>
<td>No</td>
</tr>
<tr>
<td>icon_emoji</td>
<td>Overrides the profile picture and <code>icon_url</code> parameter. Defaults to none and is not set during webhook creation. Must be enabled <a href="https://docs.mattermost.com/administration/config-settings.html#enable-integrations-to-override-profile-picture-icons">in the configuration</a>. The expected content is an emoji name, as typed in a message but without <code>:</code>.</td>
<td>No</td>
</tr>
<tr>
<td>attachments</td>
<td><a href="https://docs.mattermost.com/developer/message-attachments.html">Message attachments</a> used for richer formatting options.</td>
<td>If <code>text</code> is not set, yes</td>
</tr>
<tr>
<td>type</td>
<td>Sets the post <code>type</code>, mainly for use by plugins.<br> If not blank, must begin with &ldquo;custom_&rdquo;.</td>
<td>No</td>
</tr>
<tr>
<td>props</td>
<td>Sets the post <code>props</code>, a JSON property bag for storing extra or meta data on the post.<br> Mainly used by other integrations accessing posts through the REST API.<br> The following keys are reserved: &ldquo;from_webhook&rdquo;, &ldquo;override_username&rdquo;, &ldquo;override_icon_url&rdquo;, &ldquo;override_icon_emoji&rdquo;, &ldquo;webhook_display_name&rdquo;, &ldquo;card&rdquo; and &ldquo;attachments&rdquo;.    Props <code>card</code> allows for extra information (markdown formatted text) to be sent to Mattermost that will only be displayed in the RHS panel after a user clicks on an &lsquo;info&rsquo; icon displayed alongside the post.  The info icon cannot be customized and is only rendered visible to the user if there is <code>card</code> data passed into the message. This is only available in v5.14+. There is currently no Mobile support for <code>card</code> functionality.</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>An example request using some more parameters would look like this:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#c0f">POST</span> <span style="color:#0cf;font-weight:bold">/hooks/xxx-generatedkey-xxx</span> <span style="color:#069;font-weight:bold">HTTP</span><span style="color:#555">/</span><span style="color:#f60">1.1</span>
Host<span style="color:#555">:</span> your-mattermost-server
Content-Type<span style="color:#555">:</span> application/json
Content-Length<span style="color:#555">:</span> 630

{
  <span style="color:#309;font-weight:bold">&#34;channel&#34;</span>: <span style="color:#c30">&#34;town-square&#34;</span>,
  <span style="color:#309;font-weight:bold">&#34;username&#34;</span>: <span style="color:#c30">&#34;test-automation&#34;</span>,
  <span style="color:#309;font-weight:bold">&#34;icon_url&#34;</span>: <span style="color:#c30">&#34;https://www.mattermost.org/wp-content/uploads/2016/04/icon.png&#34;</span>,
  <span style="color:#309;font-weight:bold">&#34;text&#34;</span>: <span style="color:#c30">&#34;#### Test results for July 27th, 2017\n@channel please review failed tests.\n\n| Component  | Tests Run   | Tests Failed                                   |\n|:-----------|:-----------:|:-----------------------------------------------|\n| Server     | 948         | :white_check_mark: 0                           |\n| Web Client | 123         | :warning: 2 [(see details)](http://linktologs) |\n| iOS Client | 78          | :warning: 3 [(see details)](http://linktologs) |&#34;</span>
}
</code></pre></div><p>An example request displaying additional data in the right-hand side panel, by passing Markdown text into the <code>card</code> field of the <code>props</code> object would look like this:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#c0f">POST</span> <span style="color:#0cf;font-weight:bold">/hooks/xxx-generatedkey-xxx</span> <span style="color:#069;font-weight:bold">HTTP</span><span style="color:#555">/</span><span style="color:#f60">1.1</span>
Host<span style="color:#555">:</span> your-mattermost-server
Content-Type<span style="color:#555">:</span> application/json


{
  <span style="color:#309;font-weight:bold">&#34;channel&#34;</span>: <span style="color:#c30">&#34;town-square&#34;</span>,
  <span style="color:#309;font-weight:bold">&#34;username&#34;</span>: <span style="color:#c30">&#34;Winning-bot&#34;</span>,
  <span style="color:#309;font-weight:bold">&#34;text&#34;</span>: <span style="color:#c30">&#34;#### We won a new deal!&#34;</span>,
  <span style="color:#309;font-weight:bold">&#34;props&#34;</span>: {
    <span style="color:#309;font-weight:bold">&#34;card&#34;</span>: <span style="color:#c30">&#34;Salesforce Opportunity Information:\n\n [Opportunity Name](http://salesforce.com/OPPORTUNITY_ID)\n\n-Salesperson: **Bob McKnight** \n\n Amount: **$300,020.00**&#34;</span>
  }
}
</code></pre></div><p>When there is <code>props</code> object with a <code>card</code> property attached to the webhook payload, the posted message displays a small info icon next to the timestamp. Clicking this icon expands the right-hand side panel to display the Markdown included in the <code>card</code> property:</p>
<p><img src="https://user-images.githubusercontent.com/915956/64055959-ec0cfe80-cb44-11e9-8ee3-b64d47c86032.png" alt="image"></p>
<h3 id="slack-compatibility">Slack Compatibility&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#slack-compatibility"></i></a> </h3>
<p>See the <a href="https://docs.mattermost.com/developer/webhooks-incoming.html#slack-compatibility">admin guide&rsquo;s notes on Slack compatibility</a>.</p>
<h3 id="tips-and-best-practices">Tips and Best Practices&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#tips-and-best-practices"></i></a> </h3>
<ol>
<li>If the <code>text</code> is longer than the allowable character limit per post, the message is split into multiple consecutive posts, each within the character limit. Servers running Mattermost Server v5.0 or later <a href="https://docs.mattermost.com/administration/important-upgrade-notes.html">can support posts up to 16383 characters</a>.</li>
<li>Your webhook integration may be written in any programming language as long as it supports sending an HTTP POST request.</li>
<li>Both <code>application/x-www-form-urlencoded</code> and <code>multipart/form-data</code> are supported <code>Content-Type</code> headers. If no <code>Content-Type</code> is provided, <code>application/json</code> is assumed.</li>
</ol>


                </div>
            </div>
        </div>
    </div>
    <footer class="text-center">
    <div class="container-fluid">
        <div class="footer__copyright">© Mattermost, Inc. All Rights Reserved.</div>
        <div class="footer__icons">
            <a href="https://www.facebook.com/Mattermost-2300985916642531/"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com/mattermost"><i class="fa fa-twitter"></i></a>
            <a href="https://www.youtube.com/channel/UCNR05H72hi692y01bWaFXNA"><i class="fa fa-youtube"></i></a>
        </div>
    </div>
</footer>

</body>
</html>
