<!DOCTYPE html>





<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> Redux Actions</title>
<meta name="viewport" content="width=device-width, initial-scale=1">   
<meta http-equiv="content-language" content="en-us" />



<link rel="canonical" href="../../../../extend/plugins/webapp/actions/">


<link rel="shortcut icon" type="image/png" href="../../../../img/favicon-32x32.png" />

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">


<link rel="stylesheet" href="../../../../css/bootstrap.min.css">
<link rel="stylesheet" href="../../../../css/tabs.css">
<link rel="stylesheet" href="../../../../css/bar.css">
<link rel="stylesheet" href="../../../../css/styles.css">
<link rel="stylesheet" href="../../../../css/code.css">
<link rel="stylesheet" href="../../../../css/note.css">


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../../../../js/tabs.js"></script>
<script src="../../../../js/main.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script async src="//cdn.bizible.com/scripts/bizible.js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-64458817-2"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-64458817-2');
</script>


<script type="text/javascript">
    (function() {
    var didInit = false;
    function initMunchkin() {
    if(didInit === false) {
    didInit = true;
    Munchkin.init('161-FBE-733');
    }
    }
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
    initMunchkin();
    }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>


<script type="text/javascript" charset="utf-8">
    var _eiq = _eiq || [];
    var _engagio_settings = {
      accountId: "cb6a404b72e9141b70d1f82abc04db92b4e56238"
    };
    (function() {
      var ei = document.createElement('script'); ei.type = 'text/javascript'; ei.async = true;
      ei.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'web-analytics.engagio.com/js/ei.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ei, s);
    })();
  </script>

    </head>
<body>
    <header>
    <a href="../../../../"><img src="../../../../img/logo.svg" alt="Mattermost Logo" width="212px"></a>
    <div class="header__menu-toggle">
        <i class="fa fa-bars"></i>
    </div>
    <ul class="header__links--right">
        <li><a href="../../../../">Home</a></li>
        
            
            
            
                
                    <li><a href="../../../../contribute/getting-started">Contribute</a></li>
                
            
        
            
            
            
                
                    <li><a href="../../../../integrate/getting-started">Integrate</a></li>
                
            
        
            
            
            
                
                    <li class="active"><a href="../../../../extend/getting-started">Extend</a></li>
                
            
        
            
            
            
                
                    <li><a href="../../../../blog">Blog</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://docs.mattermost.com/">Admin Docs</a></li>
                
            
        
    </ul>
</header>




    <div id="wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 sidebar">
    <div class="sidebar__menu-toggle">
        Redux Actions
        <i class="fa fa-bars pull-right"></i>
    </div>
    <div class="row sidebar__links">
        
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../../../extend/getting-started/"> Getting Started</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../../extend/customization/"> Customizing Mattermost</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/customization/server-build/"> Server Build (Team Edition)</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/customization/server-files/"> Server Files</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/customization/webapp/"> Web App</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                
                    
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../../extend/plugins/"> Plugins (Beta)</a>
                    
                </span>
                <ul class="sub-menu" style="display: block">
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/plugins/overview/"> Overview</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="../../../../extend/plugins/server/"> Server Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                                <a class="item " href="../../../../extend/plugins/server/hello-world/">Quick Start</a>
                            
                                <a class="item " href="../../../../extend/plugins/server/reference/">Server Reference</a>
                            
                                <a class="item " href="../../../../extend/plugins/server/ha/">High Availability</a>
                            
                                <a class="item " href="../../../../extend/plugins/server/debugging/"></a>
                            
                                <a class="item " href="../../../../extend/plugins/server/best-practices/">Best Practices</a>
                            
                        </ul>
                    
                        
                        

                        
                        
                            
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="../../../../extend/plugins/webapp/"> Web App Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" style="display: block">
                            
                                <a class="item " href="../../../../extend/plugins/webapp/hello-world/">Quick Start</a>
                            
                                <a class="item " href="../../../../extend/plugins/webapp/reference/">Web App Reference</a>
                            
                                <a class="item active" href="../../../../extend/plugins/webapp/actions/">Redux Actions</a>
                            
                                <a class="item " href="../../../../extend/plugins/webapp/best-practices/">Design Best Practices</a>
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/plugins/manifest-reference/"> Manifest Reference</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/plugins/mobile/"> Mobile Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/plugins/example-plugins/"> Example Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/plugins/migration/"> Migrating Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/plugins/community_process/"> Process to Include Plugin on Community</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/plugins/community-plugin-marketplace/"> Community Plugins in the Marketplace</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/plugins/best-practices/"> Best Practices</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../../extend/plugins/helpers/"> Plugin Helpers</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../../../extend/embed/"> Embed</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
        
    </div>
</div>

                <div class="col-lg-9 doc-content">
                    
<a href="https://github.com/mattermost/mattermost-developer-documentation/edit/master/site/content/extend/plugins/webapp/actions.md" class="float-right edit-github">
    Edit on GitHub
</a>


                    <h1 class="mt-0 doc-title">
                        Redux Actions
                    </h1>
                    <p>When building web app plugins, it is common to perform actions that web and mobile apps already support. The majority of these actions exist in <a href="https://github.com/mattermost/mattermost-redux">mattermost-redux</a>, our library of shared code between Mattermost JavaScript clients.</p>
<p>Here we&rsquo;ll show how to use Redux actions with a plugin. To learn more about these actions, see the <a href="../../../../contribute/redux/actions">contributor documentation</a>.</p>
<h2 id="prerequisites">Prerequisites&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#prerequisites"></i></a> </h2>
<p>This guide assumes you have already set up your plugin development environment for web app plugins to match <a href="https://github.com/mattermost/mattermost-plugin-starter-template">mattermost-plugin-starter-template</a>. If not, follow the README instructions of that repository first, or <a href="../../../../extend/plugins/webapp/hello-world">see the Hello, World! guide</a>.</p>
<h2 id="import-mattermost-redux">Import mattermost-redux&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#import-mattermost-redux"></i></a> </h2>
<p>First, you&rsquo;ll need to add <code>mattermost-redux</code> as a dependency of your web app plugin.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#366">cd</span> /path/to/plugin/webapp
npm install mattermost-redux
</code></pre></div><p>That will add <code>mattermost-redux</code> as a dependency in your <code>package.json</code> file, allowing it to be imported into any of your plugin&rsquo;s JavaScript files.</p>
<h2 id="use-an-action">Use an Action&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#use-an-action"></i></a> </h2>
<p>Actions are used as part of components. To give components access to these actions, we pass them in as React props from the component&rsquo;s container <code>index.js</code> file. To demonstrate this, we&rsquo;ll create a new component.</p>
<p>In the <code>webapp</code> directory, let&rsquo;s create a component folder called <code>action_example</code> and switch into it.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir -p src/components/action_example
<span style="color:#366">cd</span> src/components/action_example
</code></pre></div><p>In there, create two files: <code>index.js</code> and <code>action_example.jsx</code>. If you&rsquo;re not familiar with why we&rsquo;re creating these directories and files, <a href="../../../../contribute/redux/react-redux">read the contributor documentation on using React with Redux</a>.</p>
<p>Open up <code>action_example.jsx</code> and add the following:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#069;font-weight:bold">import</span> React from <span style="color:#c30">&#39;react&#39;</span>;
<span style="color:#069;font-weight:bold">import</span> PropTypes from <span style="color:#c30">&#39;prop-types&#39;</span>;

<span style="color:#069;font-weight:bold">export</span> <span style="color:#069;font-weight:bold">default</span> <span style="color:#069;font-weight:bold">class</span> ActionExample <span style="color:#069;font-weight:bold">extends</span> React.PureComponent {
    <span style="color:#069;font-weight:bold">static</span> propTypes <span style="color:#555">=</span> {
        user<span style="color:#555">:</span> PropTypes.object.isRequired,
        patchUser<span style="color:#555">:</span> PropTypes.func.isRequired, <span style="color:#09f;font-style:italic">// here we define the action as a prop
</span><span style="color:#09f;font-style:italic"></span>    }

    updateFirstName <span style="color:#555">=</span> () =&gt; {
        <span style="color:#069;font-weight:bold">const</span> patchedUser <span style="color:#555">=</span> {
            id<span style="color:#555">:</span> <span style="color:#069;font-weight:bold">this</span>.props.user.id,
            first_name<span style="color:#555">:</span> <span style="color:#c30">&#39;Jim&#39;</span>,
        };

        <span style="color:#069;font-weight:bold">this</span>.props.patchUser(patchedUser); <span style="color:#09f;font-style:italic">// here we use the action
</span><span style="color:#09f;font-style:italic"></span>    }

    render() {
        <span style="color:#069;font-weight:bold">return</span> (
            <span style="color:#555">&lt;</span>div<span style="color:#555">&gt;</span>
                {<span style="color:#c30">&#39;First name: &#39;</span> <span style="color:#555">+</span> <span style="color:#069;font-weight:bold">this</span>.props.user.first_name}
                <span style="color:#555">&lt;</span>a
                    href<span style="color:#555">=</span><span style="color:#c30">&#39;#&#39;</span>
                    onClick<span style="color:#555">=</span>{<span style="color:#069;font-weight:bold">this</span>.updateFirstName}
                <span style="color:#555">&gt;</span>
                    Click me to update the first name<span style="color:#555">!</span>
                <span style="color:#555">&lt;</span><span style="color:#a00;background-color:#faa">/a&gt;</span>
            <span style="color:#555">&lt;</span><span style="color:#a00;background-color:#faa">/div&gt;</span>
        );
    }
}
</code></pre></div><p>This component will display a user&rsquo;s first name and then, when the link is clicked, use an action to update that user&rsquo;s first name to &ldquo;Jim&rdquo;.</p>
<p>The action <code>patchUser</code> is from mattermost-redux. It takes in a subset of a user object and updates the user on the server, <a href="https://api.mattermost.com/#tag/users%2Fpaths%2F~1users~1%7Buser_id%7D~1patch%2Fput">using the <code>PUT /users/{user_id}/patch</code> endpoint</a>.</p>
<p>We must now use our container to import this action and pass it our component. Open up the <code>index.js</code> file and add:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#069;font-weight:bold">import</span> {connect} from <span style="color:#c30">&#39;react-redux&#39;</span>;
<span style="color:#069;font-weight:bold">import</span> {bindActionCreators} from <span style="color:#c30">&#39;redux&#39;</span>;

<span style="color:#069;font-weight:bold">import</span> {patchUser} from <span style="color:#c30">&#39;mattermost-redux/actions&#39;</span>; <span style="color:#09f;font-style:italic">// importing the action
</span><span style="color:#09f;font-style:italic"></span>
<span style="color:#069;font-weight:bold">import</span> ActionExample from <span style="color:#c30">&#39;./action_example.jsx&#39;</span>;

<span style="color:#069;font-weight:bold">const</span> mapStateToProps <span style="color:#555">=</span> (state) =&gt; {
    <span style="color:#069;font-weight:bold">const</span> currentUserId <span style="color:#555">=</span> state.entities.users.currentUserId;

    <span style="color:#069;font-weight:bold">return</span> {
        user<span style="color:#555">:</span> state.entities.users.profiles[currentUserId],
    };
};

<span style="color:#069;font-weight:bold">const</span> mapDispatchToProps <span style="color:#555">=</span> (dispatch) =&gt; bindActionCreators({
    patchUser, <span style="color:#09f;font-style:italic">// passing the action as a prop
</span><span style="color:#09f;font-style:italic"></span>}, dispatch);

<span style="color:#069;font-weight:bold">export</span> <span style="color:#069;font-weight:bold">default</span> connect(mapStateToProps, mapDispatchToProps)(ActionExample);
</code></pre></div><p>The container is doing two things. First, it&rsquo;s grabbing the current (logged in) user from the Redux state and passing it in as a prop. Anytime the Redux state updates, for example when we use the <code>patchUser</code> action, our component will get the updated copy of the current user. Second, the container is importing the <code>patchUser</code> action from mattermost-redux and passing it in as an action prop to our component.</p>
<p>Now we can use <code>this.props.patchUser()</code> to update a user. The example component we made uses it to patch the current user&rsquo;s first name.</p>
<p>To use our component in our plugin we would then use the registry in the initialization function of the plugin to register the component somewhere in the Mattermost UI. That is beyond the scope of this guide, but you can <a href="../../../../extend/plugins/webapp/reference">read more about that here</a>.</p>
<h2 id="available-actions">Available Actions&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#available-actions"></i></a> </h2>
<p>The actions that are available for your plugin to import can be <a href="https://github.com/mattermost/mattermost-redux/tree/master/src/actions">found in the source code for mattermost-redux</a>.</p>


                </div>
            </div>
        </div>
    </div>
    <footer class="text-center">
    <div class="container-fluid">
        <div class="footer__copyright">Â© Mattermost, Inc. All Rights Reserved.</div>
        <div class="footer__icons">
            <a href="https://www.facebook.com/Mattermost-2300985916642531/"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com/mattermost"><i class="fa fa-twitter"></i></a>
            <a href="https://www.youtube.com/channel/UCNR05H72hi692y01bWaFXNA"><i class="fa fa-youtube"></i></a>
        </div>
    </div>
</footer>

</body>
</html>
