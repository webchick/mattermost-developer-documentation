<!DOCTYPE html>





<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> Unit Testing</title>
<meta name="viewport" content="width=device-width, initial-scale=1">   
<meta http-equiv="content-language" content="en-us" />



<link rel="canonical" href="../../../contribute/webapp/unit-testing/">


<link rel="shortcut icon" type="image/png" href="../../../img/favicon-32x32.png" />

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">


<link rel="stylesheet" href="../../../css/bootstrap.min.css">
<link rel="stylesheet" href="../../../css/tabs.css">
<link rel="stylesheet" href="../../../css/bar.css">
<link rel="stylesheet" href="../../../css/styles.css">
<link rel="stylesheet" href="../../../css/code.css">
<link rel="stylesheet" href="../../../css/note.css">


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../../../js/tabs.js"></script>
<script src="../../../js/main.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script async src="//cdn.bizible.com/scripts/bizible.js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-64458817-2"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-64458817-2');
</script>


<script type="text/javascript">
    (function() {
    var didInit = false;
    function initMunchkin() {
    if(didInit === false) {
    didInit = true;
    Munchkin.init('161-FBE-733');
    }
    }
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
    initMunchkin();
    }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>


<script type="text/javascript" charset="utf-8">
    var _eiq = _eiq || [];
    var _engagio_settings = {
      accountId: "cb6a404b72e9141b70d1f82abc04db92b4e56238"
    };
    (function() {
      var ei = document.createElement('script'); ei.type = 'text/javascript'; ei.async = true;
      ei.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'web-analytics.engagio.com/js/ei.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ei, s);
    })();
  </script>

    </head>
<body>
    <header>
    <a href="../../../"><img src="../../../img/logo.svg" alt="Mattermost Logo" width="212px"></a>
    <div class="header__menu-toggle">
        <i class="fa fa-bars"></i>
    </div>
    <ul class="header__links--right">
        <li><a href="../../../">Home</a></li>
        
            
            
            
                
                    <li class="active"><a href="../../../contribute/getting-started">Contribute</a></li>
                
            
        
            
            
            
                
                    <li><a href="../../../integrate/getting-started">Integrate</a></li>
                
            
        
            
            
            
                
                    <li><a href="../../../extend/getting-started">Extend</a></li>
                
            
        
            
            
            
                
                    <li><a href="../../../blog">Blog</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://docs.mattermost.com/">Admin Docs</a></li>
                
            
        
    </ul>
</header>




    <div id="wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 sidebar">
    <div class="sidebar__menu-toggle">
        Unit Testing
        <i class="fa fa-bars pull-right"></i>
    </div>
    <div class="row sidebar__links">
        
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../contribute/getting-started/"> Getting Started</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/getting-started/contributions-without-ticket/"> Contributions Without Ticket</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/getting-started/contribution-checklist/"> Contribution Checklist</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/getting-started/inactive-contributions/"> Inactive Contributions</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/getting-started/core-committers/"> Core Committers</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/getting-started/code-review/"> Code Review</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/getting-started/labels/"> Labels</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/getting-started/branching/"> Mattermost tick-tock Branching Strategy</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/getting-started/slash-commands/"> Slash Commands</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../contribute/server/"> Server</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/developer-setup/"> Developer Setup</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/developer-workflow/"> Server Workflow</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/rest-api/"> REST API</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/system_console/"> System Console</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/dependencies/"> Dependencies</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/cli-commands/"> CLI Commands</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/plugins/"> Plugins</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/tooling/"> Tooling</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/developer-setup/arch/"> </a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/developer-setup/centos/"> </a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/developer-setup/osx/"> </a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/developer-setup/ubuntu/"> </a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/developer-setup/windows-wsl/"> </a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/server/developer-setup/windows/"> </a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                
                    
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../contribute/webapp/"> Web App</a>
                    
                </span>
                <ul class="sub-menu" style="display: block">
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/webapp/developer-setup/"> Developer Setup</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/webapp/developer-workflow/"> Web App Workflow</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/webapp/build-component/"> Build a Component</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        
                            
                        

                        
                            
                        

                        <span class="item active">
                            <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a class="active" href="../../../contribute/webapp/unit-testing/"> Unit Testing</a></span>
                            
                        </span>
                        <ul class="sub-menu" style="display: block">
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/webapp/end-to-end-tests/"> End-to-End Testing</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/webapp/using-i18n-extract/"> Using make i18n-extract</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/webapp/webapp-to-redux/"> Migrating to Redux</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/webapp/migrating-to-typescript/"> Migrating to Typescript</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../contribute/mobile/"> Mobile Apps</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="../../../contribute/mobile/developer-setup/"> Developer Setup</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                                <a class="item " href="../../../contribute/mobile/developer-setup/developer-workflow/">Mobile Apps Workflow</a>
                            
                                <a class="item " href="../../../contribute/mobile/developer-setup/makefile/">Makefile Commands</a>
                            
                                <a class="item " href="../../../contribute/mobile/developer-setup/run-on-device/">Run on a Device</a>
                            
                                <a class="item " href="../../../contribute/mobile/developer-setup/troubleshooting/">Troubleshooting</a>
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="../../../contribute/mobile/build-your-own/"> Build Your Own App</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                                <a class="item " href="../../../contribute/mobile/build-your-own/preparation/">Build Preparations</a>
                            
                                <a class="item " href="../../../contribute/mobile/build-your-own/environment-vars/">Environment Variables</a>
                            
                                <a class="item " href="../../../contribute/mobile/build-your-own/assets-white-label/">Assets &amp; White Labeling</a>
                            
                                <a class="item " href="../../../contribute/mobile/build-your-own/android/">Build the Android App</a>
                            
                                <a class="item " href="../../../contribute/mobile/build-your-own/ios/">Build the iOS App</a>
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="../../../contribute/mobile/push-notifications/"> Setup Push Notifications</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                                <a class="item " href="../../../contribute/mobile/push-notifications/android/">Android Push Notifications</a>
                            
                                <a class="item " href="../../../contribute/mobile/push-notifications/ios/">iOS Push Notifications</a>
                            
                                <a class="item " href="../../../contribute/mobile/push-notifications/service/">Push Notification Service</a>
                            
                                <a class="item " href="../../../contribute/mobile/push-notifications/corporate-proxy/">Push Notification Service with Corporate Proxy</a>
                            
                                <a class="item " href="../../../contribute/mobile/push-notifications/migrate-gcm-fcm/">Migrate GCM to FCM</a>
                            
                        </ul>
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../contribute/redux/"> Redux</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/redux/developer-setup/"> Developer Setup</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/redux/developer-workflow/"> Redux Workflow</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/redux/actions/"> Actions</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/redux/reducers/"> Reducers</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/redux/selectors/"> Selectors</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/redux/react-redux/"> Using Redux with React</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="../../../contribute/desktop/"> Desktop App</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/desktop/developer-setup/"> Developer Setup</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/desktop/debugging/"> Debugging</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                        
                        

                        
                        

                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="../../../contribute/desktop/code-signing/"> Code Signing</a></span>
                            
                        </span>
                        <ul class="sub-menu" >
                            
                        </ul>
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../../contribute/devtalks/"> Mattermost Dev Talks</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../../contribute/containers/"> Containers</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../../contribute/team_contributions/"> Contributor Wall of Fame</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="../../../contribute/mvp/"> MVP</a>
                    
                </span>
                <ul class="sub-menu" >
                    
                </ul>
            
        
    </div>
</div>

                <div class="col-lg-9 doc-content">
                    
<a href="https://github.com/mattermost/mattermost-developer-documentation/edit/master/site/content/contribute/webapp/unit-testing.md" class="float-right edit-github">
    Edit on GitHub
</a>


                    <h1 class="mt-0 doc-title">
                        Unit Testing
                    </h1>
                    <h2 id="component-and-utility-files">Component and Utility files&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#component-and-utility-files"></i></a> </h2>
<p>The last required piece of building a webapp component is to test it. That can be done using the component testing framework described in this blog post: <a href="https://grundleborg.github.io/posts/react-component-testing-in-mattermost/">https://grundleborg.github.io/posts/react-component-testing-in-mattermost/</a>.</p>
<p><a href="https://jestjs.io/en/">Jest</a> and <a href="https://airbnb.io/enzyme/">Enzyme</a> are the main framework and testing utilities used in testing components and utility files of <code>mattermost-webapp</code>.  Please visit their respective documentation for detailed information on how to get started, best practices and updates.</p>
<p>Below is a brief guide on how to do component testing:</p>
<ol>
<li>
<p>Match snapshot using default or expected props. Note that while the snapshot is convenient, we require not to rely solely on this for every test case as this is easily overlooked by initiating <code>jest -updateSnapshot</code> without carefully inspecting the change.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#069;font-weight:bold">const</span> baseProps <span style="color:#555">=</span> {
    activeSection<span style="color:#555">:</span> <span style="color:#c30">&#39;email&#39;</span>,
    onSubmit<span style="color:#555">:</span> jest.fn(),
    updateSection<span style="color:#555">:</span> jest.fn(),
};

test(<span style="color:#c30">&#39;should match snapshot, not send email notifications&#39;</span>, () =&gt; {
    <span style="color:#069;font-weight:bold">const</span> wrapper <span style="color:#555">=</span> shallow(<span style="color:#555">&lt;</span>EmailNotificationSetting {...baseProps}<span style="color:#555">/&gt;</span>);

    <span style="color:#09f;font-style:italic">// Use &#34;toMatchInlineSnapshot&#34; whenever possible when the snapshot consists of several lines of code only
</span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// It creates an easier to read snapshot, inline with the test file.
</span><span style="color:#09f;font-style:italic"></span>    expect(wrapper).toMatchInlineSnapshot();

    <span style="color:#09f;font-style:italic">// Save snapshot particularly when component has other render function like &#34;renderOption&#34;
</span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// It creates a small snapshot of that particular render function instead of the entire component
</span><span style="color:#09f;font-style:italic"></span>    expect(wrapper.instance().renderOption()).toMatchInlineSnapshot();

    <span style="color:#09f;font-style:italic">// Only use &#34;toMatchSnapshot&#34; whenever above options are not possible.
</span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// Limit the use to one (1) snapshot only.
</span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// Save snapshot if it generates an easy to inspect and identifiable HTML or components that can easily verify future change.
</span><span style="color:#09f;font-style:italic"></span>    expect(wrapper).toMatchSnapshot();
});
</code></pre></div></li>
<li>
<p>Add verification to important elements.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">expect(wrapper.find(<span style="color:#c30">&#39;#emailNotificationImmediately&#39;</span>).exists()).toBe(<span style="color:#069;font-weight:bold">true</span>);
expect(wrapper.find(<span style="color:#c30">&#39;h1&#39;</span>).text()).toEqual(props.siteName);
expect(wrapper.find(<span style="color:#c30">&#39;h4&#39;</span>).text()).toEqual(props.customDescriptionText);
</code></pre></div></li>
<li>
<p>Check CSS class.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">expect(wrapper.find(<span style="color:#c30">&#39;#create_post&#39;</span>).hasClass(<span style="color:#c30">&#39;center&#39;</span>)).toBe(<span style="color:#069;font-weight:bold">true</span>);
</code></pre></div></li>
<li>
<p>Simulate the event and verify state changes accordingly.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">test(<span style="color:#c30">&#39;should pass handleChange&#39;</span>, () =&gt; {
    <span style="color:#069;font-weight:bold">const</span> wrapper <span style="color:#555">=</span> mountWithIntl(<span style="color:#555">&lt;</span>EmailNotificationSetting {...baseProps}<span style="color:#555">/&gt;</span>);
    wrapper.find(<span style="color:#c30">&#39;#emailNotificationImmediately&#39;</span>).simulate(<span style="color:#c30">&#39;change&#39;</span>);

    expect(wrapper.state(<span style="color:#c30">&#39;enableEmail&#39;</span>)).toBe(<span style="color:#c30">&#39;true&#39;</span>);
    expect(wrapper.state(<span style="color:#c30">&#39;emailInterval&#39;</span>)).toBe(<span style="color:#f60">30</span>);
});
</code></pre></div></li>
<li>
<p>Ensure that all functions of a component are tested. This can be done via events, state changes or just calling it directly.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">test(<span style="color:#c30">&#39;should call updateSection on handleExpand&#39;</span>, () =&gt; {
    <span style="color:#069;font-weight:bold">const</span> newUpdateSection <span style="color:#555">=</span> jest.fn();
    <span style="color:#069;font-weight:bold">const</span> wrapper <span style="color:#555">=</span> mountWithIntl(
        <span style="color:#555">&lt;</span>EmailNotificationSetting
            {...baseProps}
            updateSection<span style="color:#555">=</span>{newUpdateSection}
        <span style="color:#555">/&gt;</span>
    );
    wrapper.instance().handleExpand();

    expect(newUpdateSection).toBeCalled();
    expect(newUpdateSection).toHaveBeenCalledTimes(<span style="color:#f60">1</span>);
    expect(newUpdateSection).toBeCalledWith(<span style="color:#c30">&#39;email&#39;</span>);
});
</code></pre></div></li>
<li>
<p>When a function is passed to a component via props, make sure to test if it gets called for a particular event call or its state changes.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">test(<span style="color:#c30">&#39;should call functions on handleSubmit&#39;</span>, () =&gt; {
    <span style="color:#069;font-weight:bold">const</span> newOnSubmit <span style="color:#555">=</span> jest.fn();
    <span style="color:#069;font-weight:bold">const</span> newUpdateSection <span style="color:#555">=</span> jest.fn();
    <span style="color:#069;font-weight:bold">const</span> wrapper <span style="color:#555">=</span> mountWithIntl(
        <span style="color:#555">&lt;</span>EmailNotificationSetting
            {...baseProps}
            onSubmit<span style="color:#555">=</span>{newOnSubmit}
            updateSection<span style="color:#555">=</span>{newUpdateSection}
        <span style="color:#555">/&gt;</span>
    );

    wrapper.instance().handleSubmit();

    expect(newOnSubmit).not.toBeCalled();
    expect(newUpdateSection).toHaveBeenCalledTimes(<span style="color:#f60">1</span>);
    expect(newUpdateSection).toBeCalledWith(<span style="color:#c30">&#39;&#39;</span>);

    wrapper.find(<span style="color:#c30">&#39;#emailNotificationNever&#39;</span>).simulate(<span style="color:#c30">&#39;change&#39;</span>);
    wrapper.instance().handleSubmit();

    expect(newOnSubmit).toBeCalled();
    expect(newOnSubmit).toHaveBeenCalledTimes(<span style="color:#f60">1</span>);
    expect(newOnSubmit).toBeCalledWith({enableEmail<span style="color:#555">:</span> <span style="color:#c30">&#39;false&#39;</span>});

    expect(savePreference).toHaveBeenCalledTimes(<span style="color:#f60">1</span>);
    expect(savePreference).toBeCalledWith(<span style="color:#c30">&#39;notifications&#39;</span>, <span style="color:#c30">&#39;email_interval&#39;</span>, <span style="color:#c30">&#39;0&#39;</span>);
});
</code></pre></div></li>
<li>
<p>Test the component&rsquo;s internal or lifecycle methods by having different sets of props.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">test(<span style="color:#c30">&#39;should pass componentWillReceiveProps&#39;</span>, () =&gt; {
    <span style="color:#069;font-weight:bold">const</span> nextProps <span style="color:#555">=</span> {
        enableEmail<span style="color:#555">:</span> <span style="color:#069;font-weight:bold">true</span>,
        emailInterval<span style="color:#555">:</span> <span style="color:#f60">30</span>
    };
    <span style="color:#069;font-weight:bold">const</span> wrapper <span style="color:#555">=</span> mountWithIntl(<span style="color:#555">&lt;</span>EmailNotificationSetting {...baseProps}<span style="color:#555">/&gt;</span>);
    wrapper.setProps(nextProps);

    expect(wrapper.state(<span style="color:#c30">&#39;enableEmail&#39;</span>)).toBe(nextProps.enableEmail);
    expect(wrapper.state(<span style="color:#c30">&#39;emailInterval&#39;</span>)).toBe(nextProps.emailInterval);

    ...
    <span style="color:#069;font-weight:bold">const</span> shouldUpdate <span style="color:#555">=</span> wrapper.instance().shouldComponentUpdate({show<span style="color:#555">:</span> <span style="color:#069;font-weight:bold">true</span>});
    expect(shouldUpdate).toBe(<span style="color:#069;font-weight:bold">true</span>);
});
</code></pre></div></li>
<li>
<p>Provide a mockup of a function required by the component but also pass other exported functions out of it to prevent potential error when those were used indirectly by another functions.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">jest.mock(<span style="color:#c30">&#39;utils/utils&#39;</span>, () =&gt; {
    <span style="color:#069;font-weight:bold">const</span> original <span style="color:#555">=</span> require.requireActual(<span style="color:#c30">&#39;utils/utils&#39;</span>);
    <span style="color:#069;font-weight:bold">return</span> {
        ...original,
        isMobile<span style="color:#555">:</span> jest.fn(() =&gt; <span style="color:#069;font-weight:bold">true</span>),
    };
});
</code></pre></div></li>
<li>
<p>Simply mock the <code>mattermost-redux</code> action as necessary with readable action type with arguments.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">jest.mock(<span style="color:#c30">&#39;mattermost-redux/actions/channels&#39;</span>, () =&gt; {
    <span style="color:#069;font-weight:bold">const</span> original <span style="color:#555">=</span> require.requireActual(<span style="color:#c30">&#39;mattermost-redux/actions/channels&#39;</span>);
    <span style="color:#069;font-weight:bold">return</span> {
        ...original,
        fetchMyChannelsAndMembers<span style="color:#555">:</span> (...args) =&gt; ({type<span style="color:#555">:</span> <span style="color:#c30">&#39;MOCK_FETCH_CHANNELS_AND_MEMBERS&#39;</span>, args}),
    };
});

<span style="color:#09f;font-style:italic">// then compare the dispatched actions
</span><span style="color:#09f;font-style:italic"></span>await testStore.dispatch(Actions.loadChannelsForCurrentUser());
expect(testStore.getActions()).toEqual(expectedActions);
</code></pre></div></li>
<li>
<p>For utility functions, list all test cases with test description, input and output.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">describe(<span style="color:#c30">&#39;stripMarkdown | RemoveMarkdown&#39;</span>, () =&gt; {
<span style="color:#069;font-weight:bold">const</span> testCases <span style="color:#555">=</span> [{
    description<span style="color:#555">:</span> <span style="color:#c30">&#39;emoji: same&#39;</span>,
    inputText<span style="color:#555">:</span> <span style="color:#c30">&#39;Hey :smile: :+1: :)&#39;</span>,
    outputText<span style="color:#555">:</span> <span style="color:#c30">&#39;Hey :smile: :+1: :)&#39;</span>,
},
{
    description<span style="color:#555">:</span> <span style="color:#c30">&#39;at-mention: same&#39;</span>,
    inputText<span style="color:#555">:</span> <span style="color:#c30">&#39;Hey @user and @test&#39;</span>,
    outputText<span style="color:#555">:</span> <span style="color:#c30">&#39;Hey @user and @test&#39;</span>,
}];

testCases.forEach((testCase) =&gt; it(testCase.description, () =&gt; {
    expect(stripMarkdown(testCase.inputText)).toEqual(testCase.outputText);
}));
</code></pre></div></li>
</ol>
<p>Finally, initiate the following commands:</p>
<ol>
<li>Run <code>npm run test:watch</code>, select <code>p</code> and type filename, and see if the component test passed.</li>
<li>Run <code>npm run test:coverage</code>, and open the corresponding html report at <code>coverage/components</code> folder to see the percentage covered. Update the test if necessary. Note that it&rsquo;s not required to meet 100% coverage of a component especially if it will require an unnecessary or complicated mock up. Uncovered lines, statements, branches or functions will just be recorded so that it will be covered by next test layers like integrations or end-to-end testing.</li>
</ol>
<h2 id="troubleshooting">Troubleshooting&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#troubleshooting"></i></a> </h2>
<h3 id="1-getting-unhandledpromiserejectionwarning-typeerror-cannot-read-property-filter-of-undefined">1. Getting &ldquo;UnhandledPromiseRejectionWarning: TypeError: Cannot read property &lsquo;filter&rsquo; of undefined&rdquo;&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#1-getting-unhandledpromiserejectionwarning-typeerror-cannot-read-property-filter-of-undefined"></i></a> </h3>
<p>a. Check whether the file being tested used native timer functions (i.e., setTimeout, setInterval, clearTimeout, clearInterval).  You may mock the timers and/or run fake timers (e.g. <code>jest.useFakeTimers()</code>) if necessary.  Note that <code>jest.useFakeTimers()</code> is already in the Jest <a href="https://github.com/mattermost/mattermost-webapp/blob/master/tests/setup.js">global setup</a> but there are cases where it needs to run specifically depending on how the component uses the native timer functions.</p>
<h3 id="2-getting-unhandledpromiserejectionwarning-typeerror-0--_fffhhh-is-not-a-function">2. Getting &ldquo;UnhandledPromiseRejectionWarning: TypeError: (0 , _fff.hhh) is not a function&rdquo;&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#2-getting-unhandledpromiserejectionwarning-typeerror-0--_fffhhh-is-not-a-function"></i></a> </h3>
<p>a. Mock the specific function being used by the component but also passed other exported functions of it.</p>
<ul>
<li>
<p>On the test file: It should be mocked like:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#09f;font-style:italic">// DO NOT partially mock the module
</span><span style="color:#09f;font-style:italic"></span>jest.mock(<span style="color:#c30">&#39;actions/storage&#39;</span>, () =&gt; ({
    setGlobalItem<span style="color:#555">:</span> (...args) =&gt; ({type<span style="color:#555">:</span> <span style="color:#c30">&#39;MOCK_SET_GLOBAL_ITEM&#39;</span>, args}),
}));

<span style="color:#09f;font-style:italic">// DO fully mock the module.  Observed the inclusion on &#34;...original&#34; in the return value.
</span><span style="color:#09f;font-style:italic"></span>jest.mock(<span style="color:#c30">&#39;actions/storage&#39;</span>, () =&gt; {
    <span style="color:#069;font-weight:bold">const</span> original <span style="color:#555">=</span> require.requireActual(<span style="color:#c30">&#39;actions/storage&#39;</span>);
    <span style="color:#069;font-weight:bold">return</span> {
        ...original,
        setGlobalItem<span style="color:#555">:</span> (...args) =&gt; ({type<span style="color:#555">:</span> <span style="color:#c30">&#39;MOCK_SET_GLOBAL_ITEM&#39;</span>, args}),
    };
});
</code></pre></div></li>
</ul>
<h3 id="3-getting-unhandledpromiserejectionwarning-typeerror-cannot-read-property-data-of-undefined">3. Getting &ldquo;UnhandledPromiseRejectionWarning: TypeError: Cannot read property &lsquo;data&rsquo; of undefined&rdquo;&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#3-getting-unhandledpromiserejectionwarning-typeerror-cannot-read-property-data-of-undefined"></i></a> </h3>
<p>a. Use async mock function with resolved value. &ldquo;Cannot read property&rdquo; can be <code>error</code>, <code>data</code>, <code>exists</code>, <code>match</code>, or whatever the resolve value that the function returns.</p>
<ul>
<li>
<p>On the file being tested: If the function returns a value, like below it returns it waits for the return value of <code>data</code>.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#069;font-weight:bold">const</span> {data} <span style="color:#555">=</span> await <span style="color:#069;font-weight:bold">this</span>.props.actions.addUsersToTeam(<span style="color:#069;font-weight:bold">this</span>.props.currentTeamId, userIds);
</code></pre></div></li>
<li>
<p>On the test file: It should be mocked like:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#09f;font-style:italic">// DO NOT assign a regular mock function.
</span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> addUsersToTeam <span style="color:#555">=</span> jest.fn();

<span style="color:#09f;font-style:italic">// DO NOT mock async function with undefined resolved value.
</span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> addUsersToTeam<span style="color:#555">:</span> jest.fn(() =&gt; {
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#069;font-weight:bold">new</span> <span style="color:#366">Promise</span>((resolve) =&gt; {
        process.nextTick(() =&gt; resolve());
    });
}),

<span style="color:#09f;font-style:italic">// DO mock async function with resolved value.  Observed the used of &#34;mockResolvedValue&#34;.
</span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> addUsersToTeam <span style="color:#555">=</span> jest.fn().mockResolvedValue({data<span style="color:#555">:</span> <span style="color:#069;font-weight:bold">true</span>})

<span style="color:#09f;font-style:italic">// DO mock async function with several resolved values for different test cases.
</span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> addUsersToTeam <span style="color:#555">=</span> jest.fn().
    mockResolvedValueOnce({error<span style="color:#555">:</span> <span style="color:#069;font-weight:bold">true</span>}).
    mockResolvedValue({data<span style="color:#555">:</span> <span style="color:#069;font-weight:bold">true</span>});
</code></pre></div></li>
</ul>
<p>b. Use async test callback for async function instance</p>
<ul>
<li>
<p>On the file being tested: If the instance function is async.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">handleSubmit <span style="color:#555">=</span> async (e) =&gt; {
    ...
    <span style="color:#069;font-weight:bold">const</span> {data} <span style="color:#555">=</span> await <span style="color:#069;font-weight:bold">this</span>.props.actions.addUsersToTeam(<span style="color:#069;font-weight:bold">this</span>.props.currentTeamId, userIds);
    ...
}
</code></pre></div></li>
<li>
<p>On the test file: Instance function should be tested like:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#09f;font-style:italic">// DO NOT test as regular function.
</span><span style="color:#09f;font-style:italic"></span>test(<span style="color:#c30">&#39;should match state when handleSubmit is called&#39;</span>, () =&gt; {
    wrapper.instance().handleSubmit();
    expect(...)
}

<span style="color:#09f;font-style:italic">// DO test as async function.  Observed the async test callback and await on instance function.
</span><span style="color:#09f;font-style:italic"></span>test(<span style="color:#c30">&#39;should match state when handleSubmit is called&#39;</span>, async () =&gt; {
    await wrapper.instance().handleSubmit();
    expect(addUsersToTeam).toHaveBeenCalledTimes(<span style="color:#f60">1</span>);
}
</code></pre></div></li>
</ul>
<h3 id="4-getting-jest-assertion-failures-at-lines-containing-expecttobecalledwith-expecttohavebeennthcalledwith-or-expecttohavebeencalledtimes-when-running-make-test">4. Getting Jest assertion failures at lines containing <code>expect.toBeCalledWith()</code>, <code>expect.toHaveBeenNthCalledWith()</code> or <code>expect.toHaveBeenCalledTimes()</code> when running <code>make test</code>&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#4-getting-jest-assertion-failures-at-lines-containing-expecttobecalledwith-expecttohavebeennthcalledwith-or-expecttohavebeencalledtimes-when-running-make-test"></i></a> </h3>
<p><img src="../../../img/extend/jest-assertion-fails-nodeversion.png" width="445" /></p>
<p>a. Firstly, ensure that your machine has all the <a href="../../../contribute/webapp/developer-setup/">required prerequisites</a> installed for the mattermost-webapp project.</p>
<p>b. If not already, ensure that your machine has Node v10.15.3+ running (preferably Node 10 Latest) with npm v6.4.1+</p>
<p>c. Rerun <code>make test</code> once your machine has Node v10.15.3+ and npm v6.4.1+ installed. Double check that you&rsquo;ve selected / are currently using Node v10.15.3+ in the mattermost-webapp directory if you&rsquo;re <a href="https://github.com/nvm-sh/nvm">using NVM</a> to manage different versions of Node on your machine (<code>nvm current</code>). The Jest tests should now pass.</p>


                </div>
            </div>
        </div>
    </div>
    <footer class="text-center">
    <div class="container-fluid">
        <div class="footer__copyright"> Mattermost, Inc. All Rights Reserved.</div>
        <div class="footer__icons">
            <a href="https://www.facebook.com/Mattermost-2300985916642531/"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com/mattermost"><i class="fa fa-twitter"></i></a>
            <a href="https://www.youtube.com/channel/UCNR05H72hi692y01bWaFXNA"><i class="fa fa-youtube"></i></a>
        </div>
    </div>
</footer>

</body>
</html>
